(()=>{"use strict";var e={9719:(e,t,n)=>{n.d(t,{Z:()=>g});var a=n(8081),r=n.n(a),i=n(3645),s=n.n(i),o=n(1667),d=n.n(o),l=new URL(n(4057),n.b),c=new URL(n(8958),n.b),h=s()(r()),u=d()(l),p=d()(c);h.push([e.id,`.car__container {\n  padding-top: 10px;\n}\n\n.car__container:nth-child(odd) {\n  background-color: var(--second-bg);\n}\n\n.car {\n  position: relative;\n  z-index: 2;\n  width: 76px;\n  margin: 0;\n  padding: 0;\n}\n\n.car_broken::before {\n  content: "";\n  display: inline-block;\n  position: absolute;\n  left: 58px;\n  bottom: 15px;\n  width: 15px;\n  height: 20px;\n  background-image: url(${u});\n  background-size: contain;\n  background-repeat: no-repeat;\n}\n\n.car__options {\n  display: grid;\n  grid-template-columns: 65px 65px 1fr;\n  grid-template-rows: repeat(2, 20px);\n  grid-template-areas: \n    "select-btn remove-btn name"\n    "start-btn stop-btn none";\n  gap: 10px;\n  margin-left: 10px;\n  margin-bottom: 5px;\n}\n\n.options__select {\n  grid-area: select-btn;\n}\n\n.options__remove {\n  grid-area: remove-btn;\n}\n\n.options__name {\n  grid-area: name;\n}\n\n.options__start {\n  grid-area: start-btn;\n}\n\n.options__stop {\n  grid-area: stop-btn;\n}\n\n.road {\n  border-bottom: 2px dashed #b6b6b6;\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n  position: relative;\n}\n\n.road::after {\n  content: "";\n  background: url(${p});\n  background-size: contain;\n  width: 10px;\n  height: 35px;\n  line-height: 50px;\n  position: relative;\n  right: 65px;\n  bottom: 0px;\n}`,""]);const g=h},3297:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(8081),r=n.n(a),i=n(3645),s=n.n(i)()(r());s.push([e.id,'.garage {\n  position: absolute;\n  box-sizing: border-box;\n  width: calc(100vw - 16px);\n  transform: translateX(-150%);\n  padding: 10px;\n}\n\n.garage_active {\n  transform: translateX(0);\n  margin: 0 auto;\n}\n\n.garage__options {\n  display: grid;\n  grid-template-columns: 100px 30px 70px 150px;\n  grid-template-rows: repeat(3, 25px);\n  row-gap: 10px;\n  column-gap: 10px;\n  grid-template-areas:\n    "input-new color-new btn-create btn-generate"\n    "input-update color-update btn-update none"\n    "btn-race btn-reset btn-reset none"\n}\n\n.text-upd {\n  grid-area: input-update;\n}\n\n.color-upd {\n  grid-area: color-update;\n}\n\n.btn-update {\n  grid-area: btn-update;\n}\n\n\n.btn-race {\n  grid-area: btn-race;\n}\n\n.btn-reset {\n  grid-area: btn-reset;\n}\n\n.btn-gen {\n  grid-area: btn-generate;\n}\n\n.options__color {\n  appearance: none;\n  width: 30px;\n  height: 25px;\n  background-color: transparent;\n  border-radius: 5px;\n  border: none;\n  cursor: pointer;\n}\n\n.options__color::-webkit-color-swatch,\n.options__input-text {\n  border-radius: 5px;\n  border: 1px solid #b6b6b6;\n}\n\n.options__color::-webkit-color-swatch-wrapper {\n  padding: 0;\n}\n\n.options__color:disabled::-webkit-color-swatch,\n.options__input-text:disabled {\n  background-color: rgba(254, 255, 255, 0.50);\n  border: 1px solid rgba(254, 255, 255, 0.50);\n}\n\n.options__counter {\n  grid-area: total;\n}\n\n.cars {\n  height: 742px;\n  overflow-y: hidden;\n  transition: height 0.4s ease;\n}\n\n.cars_hide {\n  height: 0px;\n}\n',""]);const o=s},9577:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(8081),r=n.n(a),i=n(3645),s=n.n(i)()(r());s.push([e.id,".modal {\n  position: absolute;\n  top: calc(50dvh - 7.5%);\n  left: calc(50dvw - 25%);\n  width: 50%;\n  height: 15%;\n  visibility: hidden;\n  opacity: 0;\n  box-sizing: border-box;\n  padding: 15px;\n  background-color: #191B27;\n  border-radius: 15px;\n  border: 1px solid #FEFFFF;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.modal_active {\n  visibility: visible;\n  opacity: 1;\n  z-index: 4;\n}\n\n.background_active {\n  position: absolute;\n  top: -27px;\n  left: 0;\n  z-index: 3;\n  width: 100dvw;\n  height: 100dvh;\n  background-color: #000;\n  opacity: 0.5;\n}\n\n.modal__btn {\n  width: 55px;\n}\n\n.no-scroll {\n  overflow-y: hidden;\n}",""]);const o=s},764:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(8081),r=n.n(a),i=n(3645),s=n.n(i)()(r());s.push([e.id,".pagination {\n  margin: 15px 0;\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}",""]);const o=s},5575:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(8081),r=n.n(a),i=n(3645),s=n.n(i),o=n(1667),d=n.n(o),l=new URL(n(5943),n.b),c=s()(r()),h=d()(l);c.push([e.id,`.winners {\n  margin: 0 auto;\n  padding: 5px;\n  display: none;\n}\n\n.winners_active {\n  display: block;\n}\n\n.table__row {\n  display: grid;\n  width: clamp(470px, 90vw, 800px);\n  height: 40px;\n  grid-template-columns: 30px 90px 1fr 75px 130px;\n  grid-template-rows: 40px;\n  justify-items: center;\n  align-items: center;\n  border-bottom: 1px solid var(--main-transparent);\n  user-select: none;\n  font-size: calc(10px + 0.4vw);\n  transition: background-color 0.2s ease-in-out;\n}\n\n.table__row:nth-child(odd) {\n  background-color: var(--second-bg);\n}\n\n.table__row:not(.table__header):hover {\n  background-color: var(--accent);\n}\n\n\n.table__header>* {\n  line-height: 40px;\n  height: 100%;\n}\n\n.header__wins,\n.header__time {\n  cursor: pointer;\n  transition: background-color 0.4s ease-in-out;\n}\n\n.header__wins:hover,\n.header__time:hover,\n.header__wins.arrow_asc,\n.header__wins.arrow_desc,\n.header__time.arrow_asc,\n.header__time.arrow_desc {\n  background-color: var(--accent);\n}\n\n.header__wins_disabled,\n.header__time_disabled {\n  cursor: default;\n  pointer-events: none;\n}\n\n.header__wins_disabled:hover,\n.header__time_disabled:hover {\n  background-color: inherit;\n}\n\n.row__item {\n  width: 100%;\n  text-align: center;\n}\n\n.winners__table {\n  height: 451px;\n  overflow-y: hidden;\n  transition: height 0.4s ease-in;\n}\n\n.winners__table_hide {\n  height: 41px;\n}\n\n.arrow_desc,\n.arrow_asc {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 5px;\n}\n\n.arrow_desc::after,\n.arrow_asc::after {\n  content: '';\n  display: inline-block;\n  width: 25px;\n  height: 25px;\n  background-image: url(${h});\n  background-size: contain;\n  background-repeat: no-repeat;\n  transition: transform 0.4s ease-in-out;\n}\n\n.arrow_asc::after {\n  transform: rotate(180deg);\n}`,""]);const u=c},5426:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(8081),r=n.n(a),i=n(3645),s=n.n(i)()(r());s.push([e.id,":root {\n  --main-bg: hsl(222, 25%, 8%);\n  --second-bg: hsl(231, 22%, 13%);\n  --main: hsl(180, 100%, 100%);\n  --main-transparent: hsla(180, 100%, 100%, 0.5);\n  --accent: hsl(227, 89%, 61%);\n}\n\nbody {\n  margin: 0;\n  padding: 0;\n  overflow-x: hidden;\n  background-color: var(--main-bg);\n  color: var(--main)\n}\n\n.body,\n.btn,\n.options__input-text {\n  font-family: 'Rubik', sans-serif;\n}\n\n.options__input-text {\n  color: #000000;\n}\n\n.btn {\n  color: var(--main);\n  border-radius: 4px;\n  background-color: var(--accent);\n  border: 1px solid var(--accent);\n  transition: all 0.4s ease-in-out;\n}\n\n.btn:disabled,\n.btn:disabled {\n  cursor: default;\n  pointer-events: none;\n  color: var(--main-transparent);\n  background-color: var(--second-bg);\n  border: 1px solid var(--main-transparent);\n}\n\n.btn:focus-visible,\n.btn:hover {\n  cursor: pointer;\n  outline-color: transparent;\n  outline-style: solid;\n  border: 1px solid var(--main);\n  background-color: var(--accent);\n}\n\n.options__input-text:focus,\n.options__color:focus,\n.options__input-text:hover,\n.options__color:hover {\n  background-color: var(--main);\n  outline: 2px solid var(--accent);\n  transition: all 0.4s linear;\n}\n\n.btn:active {\n  color: var(--accent);\n  border: 1px solid var(--accent);\n  background: var(--main);\n}\n\n\nnav {\n  padding: 5px;\n  display: flex;\n  gap: 10px;\n}",""]);const o=s},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(a)for(var o=0;o<this.length;o++){var d=this[o][0];null!=d&&(s[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);a&&s[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),t.push(c))}},t}},1667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},8081:e=>{e.exports=function(e){return e[1]}},6652:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(3379),r=n.n(a),i=n(7795),s=n.n(i),o=n(569),d=n.n(o),l=n(3565),c=n.n(l),h=n(9216),u=n.n(h),p=n(4589),g=n.n(p),m=n(9719),v={};v.styleTagTransform=g(),v.setAttributes=c(),v.insert=d().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=u(),r()(m.Z,v);const w=m.Z&&m.Z.locals?m.Z.locals:void 0},6662:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(3379),r=n.n(a),i=n(7795),s=n.n(i),o=n(569),d=n.n(o),l=n(3565),c=n.n(l),h=n(9216),u=n.n(h),p=n(4589),g=n.n(p),m=n(3297),v={};v.styleTagTransform=g(),v.setAttributes=c(),v.insert=d().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=u(),r()(m.Z,v);const w=m.Z&&m.Z.locals?m.Z.locals:void 0},2244:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(3379),r=n.n(a),i=n(7795),s=n.n(i),o=n(569),d=n.n(o),l=n(3565),c=n.n(l),h=n(9216),u=n.n(h),p=n(4589),g=n.n(p),m=n(9577),v={};v.styleTagTransform=g(),v.setAttributes=c(),v.insert=d().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=u(),r()(m.Z,v);const w=m.Z&&m.Z.locals?m.Z.locals:void 0},9249:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(3379),r=n.n(a),i=n(7795),s=n.n(i),o=n(569),d=n.n(o),l=n(3565),c=n.n(l),h=n(9216),u=n.n(h),p=n(4589),g=n.n(p),m=n(764),v={};v.styleTagTransform=g(),v.setAttributes=c(),v.insert=d().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=u(),r()(m.Z,v);const w=m.Z&&m.Z.locals?m.Z.locals:void 0},7874:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(3379),r=n.n(a),i=n(7795),s=n.n(i),o=n(569),d=n.n(o),l=n(3565),c=n.n(l),h=n(9216),u=n.n(h),p=n(4589),g=n.n(p),m=n(5575),v={};v.styleTagTransform=g(),v.setAttributes=c(),v.insert=d().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=u(),r()(m.Z,v);const w=m.Z&&m.Z.locals?m.Z.locals:void 0},7654:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(3379),r=n.n(a),i=n(7795),s=n.n(i),o=n(569),d=n.n(o),l=n(3565),c=n.n(l),h=n(9216),u=n.n(h),p=n(4589),g=n.n(p),m=n(5426),v={};v.styleTagTransform=g(),v.setAttributes=c(),v.insert=d().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=u(),r()(m.Z,v);const w=m.Z&&m.Z.locals?m.Z.locals:void 0},3379:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var i={},s=[],o=0;o<e.length;o++){var d=e[o],l=a.base?d[0]+a.base:d[0],c=i[l]||0,h="".concat(l," ").concat(c);i[l]=c+1;var u=n(h),p={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var g=r(p,a);a.byIndex=o,t.splice(o,0,{identifier:h,updater:g,references:1})}s.push(h)}return s}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=a(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var o=n(i[s]);t[o].references--}for(var d=a(e,r),l=0;l<i.length;l++){var c=n(i[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}i=d}}},569:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},6548:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseService=void 0,t.BaseService=class{baseUrl;constructor(e=""){this.baseUrl=e}makeUrl(e,t={}){let n=`${this.baseUrl}${e}?`;return Object.keys(t).forEach((e=>{n+=`${e}=${t[e]}&`})),n.slice(0,-1)}}},9506:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.engineService=t.EngineStatusCode=void 0;const a=n(6548),r=n(6761),i=n(307),s=n(4240);t.EngineStatusCode={OK:200,BAD_REQUEST:400,NOT_FOUND:404,TOO_MANY_REQUESTS:429,INTERNAL_SERVER_ERROR:500};class o extends a.BaseService{async startEngine(e){const n=this.makeUrl(i.Endpoints.Engine,{id:e,status:i.EngineStatus.Start});return await fetch(n,{method:"PATCH"}).then((e=>{if(e.status!==t.EngineStatusCode.OK)throw new s.ApiError(e.status,e.statusText);return e.json().then((e=>e))}))}async stopEngine(e){const n=this.makeUrl(i.Endpoints.Engine,{id:e,status:i.EngineStatus.Stop});await fetch(n,{method:"PATCH"}).then((e=>{if(e.status!==t.EngineStatusCode.OK)throw new s.ApiError(e.status,e.statusText)}))}async driveEngine(e){const n=this.makeUrl(i.Endpoints.Engine,{id:e,status:i.EngineStatus.Drive});return await fetch(n,{method:"PATCH"}).then((e=>{if(e.status!==t.EngineStatusCode.OK)throw new s.ApiError(e.status,e.statusText);return e.json().then((e=>e))}))}}t.engineService=new o(r.BASE_URL)},4240:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApiError=void 0;class n extends Error{status;constructor(e,t){super(t),this.status=e}}t.ApiError=n},2763:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.garageService=t.MAX_CARS_PER_PAGE=t.GarageStatusCode=void 0;const a=n(6548),r=n(6761),i=n(307),s=n(4240);t.GarageStatusCode={OK:200,CREATED:201,NOT_FOUND:404},t.MAX_CARS_PER_PAGE=7;class o extends a.BaseService{async getCars(e){const n=this.makeUrl(i.Endpoints.Garage,{_page:e,_limit:t.MAX_CARS_PER_PAGE}),a=await fetch(n);if(!a.ok)throw new s.ApiError(a.status,a.statusText);return{cars:await a.json().then((e=>e)),totalCount:Number(a.headers.get("X-Total-Count"))}}async getCar(e){const n=this.makeUrl(`${i.Endpoints.Garage}/${e}`);return await fetch(n).then((e=>{if(e.status!==t.GarageStatusCode.OK)throw new s.ApiError(e.status,e.statusText);return e.json().then((e=>e))}))}async createCar(e){const n=this.makeUrl(i.Endpoints.Garage);return await fetch(n,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{if(e.status!==t.GarageStatusCode.CREATED)throw new s.ApiError(e.status,e.statusText);return e.json().then((e=>e))}))}async deleteCar(e){const n=this.makeUrl(`${i.Endpoints.Garage}/${e}`);await fetch(n,{method:"DELETE"}).then((e=>{if(e.status!==t.GarageStatusCode.OK)throw new s.ApiError(e.status,e.statusText)}))}async updateCar({id:e,name:n,color:a}){const r=this.makeUrl(`${i.Endpoints.Garage}/${e}`);return await fetch(r,{method:"PUT",body:JSON.stringify({name:n,color:a}),headers:{"Content-Type":"application/json"}}).then((e=>{if(e.status!==t.GarageStatusCode.OK)throw new s.ApiError(e.status,e.statusText);return e.json().then((e=>e))}))}}t.garageService=new o(r.BASE_URL)},630:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.winnerService=t.WinnerStatusCode=void 0;const a=n(6548),r=n(6761),i=n(307),s=n(4240);t.WinnerStatusCode={OK:200,CREATED:201,NOT_FOUND:404,INTERNAL_SERVER_ERROR:500};class o extends a.BaseService{async getWinners(e,t,n=i.OrderSort.ASC){const a=this.makeUrl(i.Endpoints.Winners,{_page:e,_limit:10,_sort:t,_order:n}),r=await fetch(a);if(!r.ok)throw new s.ApiError(r.status,r.statusText);return{winners:await r.json().then((e=>e)),totalCount:Number(r.headers.get("X-Total-Count"))}}async getWinner(e){const n=this.makeUrl(`${i.Endpoints.Winners}/${e}`);return await fetch(n).then((e=>{if(e.status!==t.WinnerStatusCode.OK)throw new s.ApiError(e.status,e.statusText);return e.json().then((e=>e))}))}async createWinner(e){const n=this.makeUrl(`${i.Endpoints.Winners}`);return await fetch(n,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{if(e.status!==t.WinnerStatusCode.CREATED)throw new s.ApiError(e.status,e.statusText);return e.json().then((e=>e))}))}async deleteCar(e){const n=this.makeUrl(`${i.Endpoints.Winners}/${e}`);await fetch(n,{method:"DELETE"}).then((e=>{if(e.status!==t.WinnerStatusCode.OK)throw new s.ApiError(e.status,e.statusText)}))}async updateWinner({id:e,wins:n,time:a}){const r=this.makeUrl(`${i.Endpoints.Winners}/${e}`);return await fetch(r,{method:"PUT",body:JSON.stringify({wins:n,time:a}),headers:{"Content-Type":"application/json"}}).then((e=>{if(e.status!==t.WinnerStatusCode.OK)throw new s.ApiError(e.status,e.statusText);return e.json().then((e=>e))}))}}t.winnerService=new o(r.BASE_URL)},4509:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.modelNames=t.brandNames=void 0,t.brandNames=["Nissan","Toyota","Suzuki","Honda","Mazda","Subaru","Mitsubishi","Lexsus","Acura","Datsun"],t.modelNames=["Cube","GT-R","Supra","Mark II","Jimny","SX4","MX-5","RX-7","Impreza","BRZ","Lancer","3000GT","LS 430","LFA","Integra","NSX","240Z","280ZX"]},6947:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(7950));class i extends r.default{constructor(e,t,n=!1){super({tag:"button",classNames:e,text:`${t}`}),n?this.disable():this.enable()}addClick(e){this.el.addEventListener("click",e)}addAsyncClick(e,t={}){this.el.addEventListener("click",(()=>{e().catch((()=>{}))}),t)}disable(){this.el.disabled=!0}enable(){this.el.disabled=!1}}t.default=i},7950:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{el;constructor(e){this.el=document.createElement(e.tag),this.addClass(e.classNames),this.addText(e.text),this.setAttribute(e.attr)}addClass(e){e&&this.el.classList.add(...e.split(" "))}removeClass(e){e&&this.el.classList.remove(...e.split(" "))}addText(e){e&&(this.el.textContent=e)}setAttribute(e){e&&Object.entries(e).forEach((([e,t])=>{this.el.setAttribute(e,t)}))}addInner(...e){this.el.append(...e.map((e=>e.createElement())))}createElement(){return this.el}destroy(){this.el.remove()}}},5366:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(7950));class i extends r.default{constructor(e,t,n=!1){super({tag:"input",classNames:t,attr:{type:e}}),n?this.disable():this.enable()}setValue=e=>{this.el.value=e};getValue(){return this.el.value}handleChange(e){this.el.addEventListener("change",e)}disable(){this.el.disabled=!0}enable(){this.el.disabled=!1}}t.default=i},6077:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=n(1709),i=n(3287),s=a(n(6947)),o=a(n(7950));t.App=class{nav=new o.default({tag:"nav",classNames:"pages-nav"});btnToWinners=new s.default("btn nav__btn","To Winners");btnToGarage=new s.default("btn nav__btn","To garage",!0);init(){this.nav.addInner(this.btnToGarage,this.btnToWinners),document.body.append(this.nav.createElement());const e=new r.GarageController(document.body),t=new i.Winners(document.body);e.init().catch((()=>{})),e.show();const n=t.show,a=t.hide,s=e.show,o=e.hide;this.btnToWinners.addClick((()=>{o(),t.init().catch((()=>{})),n(),this.btnToGarage.enable(),this.btnToWinners.disable()})),this.btnToGarage.addClick((()=>{a(),s(),this.btnToGarage.disable(),this.btnToWinners.enable()}))}}},3858:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(5217)),i=a(n(5712)),s=n(9463);t.default=class{model;view;constructor(e){this.model=new r.default(e.name,e.color,e.id),this.view=new i.default(this.model.getName(),this.model.getColor()),this.view.startBtn.addAsyncClick(this.driveCar)}isStarted(){return this.model.isStarted}getCarId(){return this.model.getId()}getCarName(){return this.model.getName()}getCarParams(){return this.model.getCar()}setName(e){this.model.setName(e),this.view.setName(this.model.getName())}setColor(e){this.model.setColor(e),this.view.setColor(this.model.getColor())}driveCar=async(e=!1)=>{if(this.view.turnOffBtns(["start","select","remove"]),await this.model.startEngine(),this.view.moveToFinish(this.model.getAnimationTime()),e||this.view.turnOnBtns(["stop"]),await this.model.startDrive(),this.view.turnOnBtns(["select","remove"]),this.model.isBroken&&this.model.isStarted)throw this.view.movePause(),this.view.setBroken(),this.view.turnOnBtns(["select","remove"]),e||this.view.turnOnBtns(["stop"]),new Error};stopCar=async(e=!0)=>{this.view.turnOffBtns(["stop","select","remove"]);try{this.view.movePause(),await this.model.stopEngine(),this.view.moveToStart(),this.view.turnOnBtns(["start","select","remove"])}catch(t){e||this.view.turnOnBtns(["stop"]),this.view.turnOnBtns(["select","remove"])}};destroyCar(){this.view.destroy()}createCar(e){this.view.render(e)}removeCar=async()=>{try{await this.model.removeCar(),this.destroyCar()}catch(e){(0,s.isError)(e)&&console.log(e.message)}};getSelectBtn(){return this.view.selectBtn.el}getRemoveBtn(){return this.view.removeBtn.el}getStopBtn(){return this.view.stopBtn.el}updateCar(e){this.setName(e.name),this.setColor(e.color)}getTime(){return Math.round(this.model.getAnimationTime()/1e3*100)/100}turnOffStopBtn(){this.view.turnOffBtns(["stop"])}}},5217:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n(9506),r=n(2763),i=n(4240);t.default=class{name;color;id;isStarted;isBroken;state;velocity;distance;time=NaN;constructor(e,t,n,a=!1,r=!1,i="ok"){this.name=e,this.color=t,this.id=n,this.isStarted=a,this.isBroken=r,this.state=i}setName(e){this.name=e}getName(){return this.name}setColor(e){this.color=e}getColor(){return this.color}getId(){return this.id}getCar(){return{name:this.name,color:this.color,id:this.id}}getTime(){return this.time}setDriveParams(e){this.velocity=e.velocity,this.distance=e.distance}getAnimationTime(){return Math.round(this.distance/this.velocity)}async startEngine(){try{const e=await a.engineService.startEngine(this.id);this.setDriveParams(e),this.isStarted=!0}catch(e){this.velocity=0,this.distance=0,this.isStarted=!1}}async stopEngine(){this.isStarted&&(await a.engineService.stopEngine(this.id),this.isBroken=!1,this.isStarted=!1,this.velocity=0,this.distance=0)}async startDrive(){try{if(!this.isStarted)return;await a.engineService.driveEngine(this.id),this.time=this.getAnimationTime()}catch(e){e instanceof i.ApiError&&500===e.status&&(this.isBroken=!0)}}async removeCar(){return r.garageService.deleteCar(this.id)}}},5712:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(6652);const r=a(n(9289)),i=a(n(6947)),s=a(n(7950)),o=n(6761);t.default=class{selectBtn=new i.default("btn options__select","Select");removeBtn=new i.default("btn options__remove","Remove");startBtn=new i.default("btn options__start","Start");stopBtn=new i.default("btn options__stop","Stop",!0);car=new s.default({tag:"div",classNames:"car"});carContainer=new s.default({tag:"div",classNames:"car__container"});carOptions=new s.default({tag:"div",classNames:"car__options"});road=new s.default({tag:"div",classNames:"road"});carName=new s.default({tag:"p",classNames:"options__name"});animationDrive;constructor(e,t){this.car.el.innerHTML=(0,r.default)(t),this.setName(e),this.carOptions.addInner(this.selectBtn,this.removeBtn,this.startBtn,this.stopBtn,this.carName),this.road.addInner(this.car),this.carContainer.addInner(this.carOptions,this.road)}setName(e){this.carName.addText(e)}setColor(e){this.car.el.innerHTML=(0,r.default)(e)}moveToFinish(e){const t=[{transform:"translateX(0)"},{transform:`translateX(${this.carContainer.el.offsetWidth-o.CAR_WIDTH}px)`}];this.animationDrive=this.car.el.animate(t,{duration:e,iterations:1,fill:"forwards"})}setBroken(){this.car.addClass("car_broken")}moveToStart(){this.car.removeClass("car_broken"),this.car.el.animate([{transform:"translateX(0)"},{transform:"translateX(0)"}],{duration:1,iterations:1,fill:"forwards"})}movePause(){this.animationDrive.pause()}render(e){e.append(this.carContainer.createElement())}destroy=()=>{this.carContainer.el.remove()};turnOffBtns(e){e.forEach((e=>{switch(e){case"stop":this.stopBtn.disable();break;case"start":this.startBtn.disable();break;case"select":this.selectBtn.disable();break;case"remove":this.removeBtn.disable()}}))}turnOnBtns(e){e.forEach((e=>{switch(e){case"stop":this.stopBtn.enable();break;case"start":this.startBtn.enable();break;case"select":this.selectBtn.enable();break;case"remove":this.removeBtn.enable()}}))}}},9289:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return`<svg width="76" height="23" viewBox="0 0 76 23" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M74.5682 19.7754C75.3427 17.2026 75.1364 15.0349 73.9548 13.3262C71.7061 10.0805 66.708 9.66511 65.7539 9.61619L63.8843 8.61184L63.7621 8.56175C61.6861 7.97072 53.868 7.73302 52.6968 7.70025C50.8606 6.79715 49.3335 5.95154 47.981 5.20264L47.9575 5.18959L47.9556 5.18855C43.2032 2.55523 40.0616 0.814453 31.0698 0.814453C20.1794 0.814453 11.2915 5.52122 10.0995 6.1801C9.44858 6.22903 8.87339 6.27334 8.32967 6.31626L6.83554 4.30085L8.53452 4.47948C9.20809 4.5501 9.52219 4.19262 9.2361 3.68121C8.94908 3.1698 8.17065 2.69762 7.49569 2.62654L1.9518 2.04405C1.27822 1.97366 0.964122 2.33091 1.25137 2.84232C1.53839 3.35373 2.31682 3.82591 2.99178 3.89699L3.84335 3.98607L5.73352 6.53619C2.53394 6.83967 2.53394 7.02983 2.53394 7.54494C2.53394 11.7754 1.99161 12.7504 1.87842 12.938L1 12.2362V16.6255L1.52034 17.2924C1.49997 17.9328 1.71084 18.5209 2.13929 19.0073C3.5237 20.5776 6.5 20.5951 7.05937 20.623C7.61874 20.651 8.59841 20.6243 11.8693 20.6646C11.8614 20.6512 11.8535 20.6378 11.8456 20.6243C11.8399 20.6146 11.8342 20.6048 11.8284 20.5951C11.736 20.4383 11.6436 20.2813 11.5684 20.1126C11.5051 19.9708 11.4575 19.8225 11.4096 19.6735C11.3944 19.6262 11.3792 19.5789 11.3635 19.5317C11.1758 18.9582 11.0483 18.3556 11.0483 17.7212C11.0483 14.4732 13.7442 12 17 12C20.2558 12 22.8612 14.4741 22.8612 17.7224C22.8612 19.1228 22.3471 20.3944 21.525 21.4066C21.3507 21.6205 20.9701 22.0161 20.9701 22.0161C27.7596 22.0412 46.1793 21.7442 59.2674 22.0343C59.0851 21.8535 58.9285 21.6467 58.7734 21.4417L58.7497 21.4105C58.5987 21.2134 58.4668 21.0066 58.342 20.7901C57.8411 19.9261 57.5319 18.9381 57.5319 17.8696C57.5319 14.6227 60.1831 11.9817 63.4385 11.9817C66.6939 11.9817 69.3451 14.6239 69.3451 17.8696C69.3451 19.0526 68.9856 20.1486 68.3841 21.0724C68.2523 21.2725 68.0968 21.4545 67.9413 21.6365L67.9119 21.671C67.7308 21.8838 67.5378 22.082 67.3269 22.2673C68.5327 22.3031 69.5719 22.3209 70.4624 22.3209C74.9906 22.3209 75.8753 21.9313 75.9855 21.1628C76.022 20.9286 76.1049 20.3502 74.5682 19.7754ZM18.7458 6.05731C17.9502 6.55917 18.3375 7.70025 19.2782 7.70025H33.7421H44.9932C45.8631 7.70025 46.261 6.71938 45.5508 6.21683C42.3073 3.92147 37.2733 2.46379 33.7421 2.46379C27.3008 2.46379 22.7063 3.55917 18.7458 6.05731Z" fill="${e}"/>\n  <path d="M47.9575 5.18959L47.9556 5.18855C43.2032 2.55523 40.0616 0.814453 31.0698 0.814453C20.1794 0.814453 11.2915 5.52122 10.0995 6.1801C9.44858 6.22903 8.87339 6.27334 8.32967 6.31626L6.83554 4.30085L8.53452 4.47948C9.20809 4.5501 9.52219 4.19262 9.2361 3.68121C8.94908 3.1698 8.17065 2.69762 7.49569 2.62654L1.9518 2.04405C1.27822 1.97366 0.964122 2.33091 1.25137 2.84232C1.53839 3.35373 2.31682 3.82591 2.99178 3.89699L3.84335 3.98607L5.73352 6.53619C2.53394 6.83967 2.53394 7.02983 2.53394 7.54494C2.53394 11.7754 1.99161 12.7504 1.87842 12.938L1 12.2362V16.6255L1.52034 17.2924C1.49997 17.9328 1.71084 18.5209 2.13929 19.0073C3.5237 20.5776 6.5 20.5951 7.05937 20.623C7.61874 20.651 8.59841 20.6243 11.8693 20.6646C11.8614 20.6512 11.8535 20.6378 11.8456 20.6243C11.8399 20.6146 11.8342 20.6048 11.8284 20.5951C11.736 20.4383 11.6436 20.2813 11.5684 20.1126C11.5051 19.9708 11.4575 19.8225 11.4096 19.6735C11.3944 19.6262 11.3792 19.5789 11.3635 19.5317C11.1758 18.9582 11.0483 18.3556 11.0483 17.7212C11.0483 14.4732 13.7442 12 17 12C20.2558 12 22.8612 14.4741 22.8612 17.7224C22.8612 19.1228 22.3471 20.3944 21.525 21.4066C21.3507 21.6205 20.9701 22.0161 20.9701 22.0161C27.7596 22.0412 46.1793 21.7442 59.2674 22.0343C59.0851 21.8535 58.9285 21.6467 58.7734 21.4417M47.9575 5.18959L47.981 5.20264M47.9575 5.18959C47.9653 5.19394 47.9732 5.19829 47.981 5.20264M58.7497 21.4105C58.5987 21.2134 58.4668 21.0066 58.342 20.7901C57.8411 19.9261 57.5319 18.9381 57.5319 17.8696C57.5319 14.6227 60.1831 11.9817 63.4385 11.9817C66.6939 11.9817 69.3451 14.6239 69.3451 17.8696C69.3451 19.0526 68.9856 20.1486 68.3841 21.0724C68.2523 21.2725 68.0968 21.4545 67.9413 21.6365M58.7497 21.4105L58.7734 21.4417M58.7497 21.4105C58.7576 21.4209 58.7655 21.4313 58.7734 21.4417M67.9119 21.671C67.7308 21.8838 67.5378 22.082 67.3269 22.2673C68.5327 22.3031 69.5719 22.3209 70.4624 22.3209C74.9906 22.3209 75.8753 21.9313 75.9855 21.1628C76.022 20.9286 76.1049 20.3502 74.5682 19.7754C75.3427 17.2026 75.1364 15.0349 73.9548 13.3262C71.7061 10.0805 66.708 9.66511 65.7539 9.61619L63.8843 8.61184L63.7621 8.56175C61.6861 7.97072 53.868 7.73302 52.6968 7.70025C50.8606 6.79715 49.3335 5.95154 47.981 5.20264M67.9119 21.671L67.9413 21.6365M67.9119 21.671C67.9217 21.6595 67.9315 21.648 67.9413 21.6365M33.7421 7.70025H19.2782C18.3375 7.70025 17.9502 6.55917 18.7458 6.05731C22.7063 3.55917 27.3008 2.46379 33.7421 2.46379M33.7421 7.70025H44.9932C45.8631 7.70025 46.261 6.71938 45.5508 6.21683C42.3073 3.92147 37.2733 2.46379 33.7421 2.46379M33.7421 7.70025V2.46379" stroke="#FEFFFF" stroke-width="0.5"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M17.6213 13.9025L17.4339 16.3031C17.7823 16.414 18.0822 16.6318 18.2861 16.9254L20.4957 15.9867C19.9266 14.9035 18.8727 14.1133 17.6213 13.9025ZM20.9121 17.2824L18.577 17.8435L18.5776 17.8488L18.5781 17.8542C18.5781 18.2269 18.4483 18.5663 18.238 18.8413L19.8024 20.6308C20.5123 19.9111 20.9502 18.9239 20.9502 17.8348C20.9502 17.6473 20.9372 17.4629 20.9121 17.2824ZM18.6983 21.4229L17.4523 19.3998C17.2895 19.4537 17.1184 19.49 16.9375 19.49C16.7473 19.49 16.5675 19.4513 16.3976 19.392L15.1831 21.4136C15.716 21.6756 16.3158 21.8229 16.9502 21.8229C17.577 21.8229 18.1701 21.6791 18.6983 21.4229ZM14.0849 20.6176L15.6208 18.8215C15.4197 18.55 15.2968 18.2175 15.2968 17.8542C15.2968 17.8488 15.2976 17.8435 15.2984 17.8383C15.2992 17.8333 15.2999 17.8284 15.3 17.8232L12.9876 17.287C12.9629 17.466 12.9502 17.6489 12.9502 17.8348C12.9502 18.9172 13.3827 19.899 14.0849 20.6176ZM13.401 15.9937L15.6078 16.9027C15.8167 16.6131 16.1184 16.399 16.4694 16.2943L16.2565 13.9064C15.0123 14.1233 13.9659 14.9134 13.401 15.9937ZM16.9502 12.8496C14.1888 12.8496 11.9502 15.0815 11.9502 17.8348C11.9502 20.588 14.1888 22.8199 16.9502 22.8199C19.7116 22.8199 21.9502 20.588 21.9502 17.8348C21.9502 15.0815 19.7116 12.8496 16.9502 12.8496ZM16.9375 19.0226C17.5836 19.0226 18.1094 18.4984 18.1094 17.8542C18.1094 17.2099 17.5836 16.6858 16.9375 16.6858C16.2914 16.6858 15.7656 17.2099 15.7656 17.8542C15.7656 18.4984 16.2914 19.0226 16.9375 19.0226ZM16.9375 18.5553C16.5498 18.5553 16.2344 18.2407 16.2344 17.8542C16.2344 17.4677 16.5498 17.1532 16.9375 17.1532C17.3251 17.1532 17.6406 17.4677 17.6406 17.8542C17.6406 18.2407 17.3251 18.5553 16.9375 18.5553Z" fill="#FEFFFF"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M64.1213 13.8986L63.9339 16.2991C64.2823 16.4101 64.5822 16.6279 64.7861 16.9215L66.9957 15.9828C66.4266 14.8996 65.3727 14.1094 64.1213 13.8986ZM67.4121 17.2784L65.077 17.8396L65.0776 17.8449L65.0781 17.8503C65.0781 18.223 64.9483 18.5624 64.738 18.8374L66.3024 20.6269C67.0123 19.9072 67.4502 18.92 67.4502 17.8309C67.4502 17.6434 67.4372 17.459 67.4121 17.2784ZM65.1983 21.419L63.9523 19.3959C63.7895 19.4498 63.6184 19.4861 63.4375 19.4861C63.2473 19.4861 63.0675 19.4474 62.8976 19.3881L61.6831 21.4097C62.216 21.6717 62.8158 21.819 63.4502 21.819C64.077 21.819 64.6701 21.6752 65.1983 21.419ZM60.5849 20.6136L62.1208 18.8176C61.9197 18.5461 61.7968 18.2136 61.7968 17.8503C61.7968 17.8449 61.7976 17.8396 61.7984 17.8344C61.7992 17.8294 61.7999 17.8245 61.8 17.8193L59.4876 17.283C59.4629 17.4621 59.4502 17.645 59.4502 17.8309C59.4502 18.9133 59.8827 19.8951 60.5849 20.6136ZM59.901 15.9898L62.1078 16.8988C62.3167 16.6092 62.6184 16.3951 62.9694 16.2904L62.7565 13.9025C61.5123 14.1194 60.4659 14.9095 59.901 15.9898ZM63.4502 12.8457C60.6888 12.8457 58.4502 15.0776 58.4502 17.8309C58.4502 20.5841 60.6888 22.816 63.4502 22.816C66.2116 22.816 68.4502 20.5841 68.4502 17.8309C68.4502 15.0776 66.2116 12.8457 63.4502 12.8457ZM63.4375 19.0187C64.0836 19.0187 64.6094 18.4945 64.6094 17.8503C64.6094 17.206 64.0836 16.6819 63.4375 16.6819C62.7914 16.6819 62.2656 17.206 62.2656 17.8503C62.2656 18.4945 62.7914 19.0187 63.4375 19.0187ZM63.4375 18.5513C63.0498 18.5513 62.7344 18.2368 62.7344 17.8503C62.7344 17.4638 63.0498 17.1493 63.4375 17.1493C63.8251 17.1493 64.1406 17.4638 64.1406 17.8503C64.1406 18.2368 63.8251 18.5513 63.4375 18.5513Z" fill="#FEFFFF"/>\n  </svg> \n  `}},1709:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GarageController=void 0;const r=n(307),i=n(2559),s=n(2763),o=a(n(3858)),d=n(4301),l=n(4073),c=n(4509),h=n(407),u=n(630),p=n(3295);t.GarageController=class{view;model=new d.GarageModel;page=1;pagination=new p.Pagination(s.MAX_CARS_PER_PAGE);constructor(e){this.view=new i.GarageView(e),this.view.updateBtn.addAsyncClick(this.update),this.view.raceBtn.addAsyncClick(this.raceAllCars),this.view.resetBtn.addAsyncClick(this.resetAllCars),this.view.createBtn.addAsyncClick(this.addCar),this.view.genBtn.addAsyncClick(this.addHundredCars),this.pagination.render(this.view.carsContainer.el),this.pagination.next((()=>this.changePage(r.PageDirection.NEXT))),this.pagination.prev((()=>this.changePage(r.PageDirection.PREV)))}init=async()=>{try{const{cars:e,totalCount:t}=await s.garageService.getCars(this.page);e.forEach((e=>{if(this.model.carsOnPage.find((t=>t.getCarId()===e.id))||this.model.totalOnPage>=s.MAX_CARS_PER_PAGE)return;const t=new o.default(e);t.createCar(this.view.carsContainer.el),this.setCallback(t),this.model.carsOnPage.push(t),this.model.totalOnPage+=1})),this.model.total=t,this.pagination.updatePagination(this.model.total,this.model.totalOnPage,this.page)}catch(e){console.log(e)}};removeCarsFromPage(){this.model.carsOnPage=[],this.model.totalOnPage=0,this.model.isRace=!1,this.view.resetUpdate()}changePage(e){const t=this.model.carsOnPage;switch(this.view.turnOffBtns(["race","reset","create","update","gen"]),this.pagination.turnOffBtns(),e){case r.PageDirection.NEXT:this.removeCarsFromPage(),this.page+=1;break;case r.PageDirection.PREV:if(1===this.page)return;this.removeCarsFromPage(),this.page-=1}this.view.carsContainer.addClass("cars_hide"),this.view.carsContainer.el.addEventListener("transitionend",(()=>{t.forEach((e=>e.destroyCar())),this.init().catch((()=>{})),this.view.carsContainer.removeClass("cars_hide"),this.view.turnOnBtns(["race","reset","create","gen"])}),{once:!0})}setCallback(e){e.getSelectBtn().addEventListener("click",(()=>{this.startUpdate(e.getCarParams(),e)})),e.getRemoveBtn().addEventListener("click",(()=>{this.deleteCar(e).catch((()=>{}))})),e.getStopBtn().addEventListener("click",(()=>{this.stopCar(e).catch((()=>{}))}))}deleteCar=async e=>{await e.removeCar();const t=this.model.carsOnPage.indexOf(e);this.model.carsOnPage.splice(t,1),this.model.totalOnPage-=1,await this.init(),0===this.model.totalOnPage&&this.changePage(r.PageDirection.PREV),await u.winnerService.deleteCar(e.getCarId())};stopCar=async e=>{try{this.view.turnOffBtns(["race","reset"]),await e.stopCar()}catch{console.log("failed to stop the car")}finally{this.view.turnOnBtns(["race","reset"])}};startUpdate=(e,t)=>{this.model.setSelectedCar(t),this.view.setDataForUpdate(e.name,e.color)};update=async()=>{try{const e=this.view.updateCarInput.getValue(),t=this.view.colorPickerUpdate.getValue();await this.model.update(e,t),this.view.resetUpdate(),this.view.turnOnBtns(["reset"])}catch(e){console.log("failed to update")}};raceAllCars=async()=>{try{this.view.turnOffBtns(["race","reset","create","gen"]),this.pagination.turnOffBtns(),this.model.isRace=!0,await this.model.resetAllCars(),await this.model.raceAllCars(),this.showWinner()}catch(e){this.view.turnOnBtns(["race"])}finally{this.pagination.updatePagination(this.model.total,this.model.totalOnPage,this.page),this.view.turnOnBtns(["reset","create","gen"])}};addCar=async()=>{let e=this.view.newCarInput.getValue();""===e&&(e=(0,l.buildName)(c.brandNames,c.modelNames));const t=this.view.colorPickerNew.getValue();await s.garageService.createCar({name:e,color:t}),this.view.clearCreateInputs(),await this.init()};addHundredCars=async()=>{const e=[];for(let t=0;t<100;t+=1){const t=(0,l.buildName)(c.brandNames,c.modelNames),n=(0,h.getRandomColor)();e.push(s.garageService.createCar({name:t,color:n}))}this.view.turnOffBtns(["gen"]),await Promise.allSettled(e),await this.init(),this.view.turnOnBtns(["gen"])};resetAllCars=async()=>{this.model.isRace=!1,await this.model.resetAllCars(),this.view.raceBtn.enable()};showWinner(){if(this.model.winner){const e=this.model.winner.getCarName(),t=this.model.winner.getTime();this.view.modal.setText(`${e} wins in ${t} sec`),this.view.modal.showModal()}}show=()=>{this.view.garageContainer.addClass("garage_active")};hide=()=>{this.view.garageContainer.removeClass("garage_active")}}},4301:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GarageModel=void 0;const a=n(2763),r=n(630),i=n(4240);t.GarageModel=class{selectedCar;carsOnPage=[];winner;totalOnPage=0;total=0;isRace=!1;setSelectedCar(e){this.selectedCar=e}async update(e,t){try{if(!this.carsOnPage.includes(this.selectedCar))return;const n=await a.garageService.updateCar({id:Number(this.selectedCar.getCarId()),name:e,color:t});this.selectedCar.updateCar(n)}catch(e){throw new Error("failed to update")}}raceAllCars=async()=>{const e=[];this.carsOnPage.forEach((t=>{t.turnOffStopBtn(),e.push(t.driveCar(!0).then((()=>String(t.getCarId()))))})),await Promise.any(e).then((e=>{const t=this.carsOnPage.find((t=>String(t.getCarId())===e));t&&(this.winner=t)})).catch((()=>{this.winner=null,console.error("No winners")})),this.isRace&&await this.uploadWinner()};uploadWinner=async()=>{try{if(this.winner){const e=await r.winnerService.getWinner(Number(this.winner?.getCarId())),t=e.id,n=e.wins+1;let a=e.time;this.winner.getTime()<a&&(a=this.winner.getTime()),console.log("update",t,n,a),await r.winnerService.updateWinner({id:t,wins:n,time:a}).catch((()=>{}))}}catch(e){if(e instanceof i.ApiError&&e.status===r.WinnerStatusCode.NOT_FOUND&&this.winner){const e=this.winner?.getCarId(),t=1,n=this.winner.getTime();console.log("new",e,t,n),await r.winnerService.createWinner({id:e,wins:t,time:n}).catch((()=>{}))}}};resetAllCars=async()=>{const e=[];this.carsOnPage.forEach((t=>{e.push(t.stopCar(!0))})),await Promise.allSettled(e)}}},2559:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GarageView=void 0,n(6662);const r=a(n(6947)),i=a(n(7950)),s=a(n(5366)),o=n(1313),d="#000000";t.GarageView=class{garageContainer=new i.default({tag:"div",classNames:"garage"});newCarInput=new s.default("text","options__input-text text-new");colorPickerNew=new s.default("color","options__color color-new");createBtn=new r.default("btn options__btn btn-create","Create");updateCarInput=new s.default("text","options__input-text text-upd",!0);colorPickerUpdate=new s.default("color","options__color color-upd",!0);updateBtn=new r.default("btn options__btn btn-update","Update",!0);raceBtn=new r.default("btn options__btn btn-race","Race");resetBtn=new r.default("btn options__btn btn-reset","Reset");genBtn=new r.default("btn options__btn btn-gen","Generate 100 cars");carsContainer=new i.default({tag:"div",classNames:"cars"});modal;constructor(e){const t=new i.default({tag:"div",classNames:"garage__options"});this.modal=new o.ModalWindow(this.garageContainer.el),t.addInner(this.newCarInput,this.colorPickerNew,this.createBtn,this.updateCarInput,this.colorPickerUpdate,this.updateBtn,this.raceBtn,this.resetBtn,this.genBtn),this.garageContainer.addInner(t,this.carsContainer),e.append(this.garageContainer.createElement())}setDataForUpdate(e,t){this.updateCarInput.setValue(e),this.colorPickerUpdate.setValue(t),this.updateCarInput.enable(),this.colorPickerUpdate.enable(),this.updateBtn.enable()}turnOffBtns(e){e.forEach((e=>{switch(e){case"create":this.createBtn.disable();break;case"update":this.updateBtn.disable();break;case"gen":this.genBtn.disable();break;case"race":this.raceBtn.disable();break;case"reset":this.resetBtn.disable()}}))}turnOnBtns(e){e.forEach((e=>{switch(e){case"create":this.createBtn.enable();break;case"update":this.updateBtn.enable();break;case"gen":this.genBtn.enable();break;case"race":this.raceBtn.enable();break;case"reset":this.resetBtn.enable()}}))}clearCreateInputs(){this.newCarInput.setValue(""),this.colorPickerNew.setValue(d)}resetUpdate(){this.updateCarInput.setValue(""),this.colorPickerUpdate.setValue(d),this.updateCarInput.disable(),this.colorPickerUpdate.disable(),this.updateBtn.disable()}}},1313:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ModalWindow=void 0,n(2244);const r=a(n(7950)),i=a(n(6947));t.ModalWindow=class{modalWindow=new r.default({tag:"div",classNames:"modal"});modalText=new r.default({tag:"p",classNames:"modal__text"});background=new r.default({tag:"div",classNames:"background"});constructor(e){const t=new i.default("btn modal__btn","Close");t.addClick(this.hideModal),this.background.el.addEventListener("click",this.hideModal),this.modalWindow.addInner(this.modalText,t),e.append(this.background.createElement()),e.append(this.modalWindow.createElement())}setText(e){this.modalText.addText(e)}hideModal=()=>{document.body.classList.remove("no-scroll"),this.modalWindow.el.classList.remove("modal_active"),this.background.el.classList.remove("background_active")};showModal(){this.modalWindow.addClass("modal_active"),this.background.addClass("background_active"),document.body.classList.add("no-scroll")}}},3295:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Pagination=void 0,n(9249);const r=a(n(7950)),i=a(n(6947));t.Pagination=class{btnNext=new i.default("btn pagination__btn btn-next",">",!0);btnPrev=new i.default("btn pagination__btn btn-prev","<",!0);pageCounter=new r.default({tag:"div",classNames:"pagination__counter"});paginationContainer=new r.default({tag:"div",classNames:"pagination"});carsCounter=new r.default({tag:"div",classNames:"options__counter"});max=0;constructor(e){this.max=e,this.paginationContainer.addInner(this.btnPrev,this.pageCounter,this.btnNext,this.carsCounter)}render(e){e.before(this.paginationContainer.createElement())}updatePagination(e,t,n){this.setCounters(n,e),e>t&&this.btnNext.enable(),e<=n*this.max&&this.btnNext.disable(),n>1&&this.btnPrev.enable(),1===n&&this.btnPrev.disable()}setCounters(e,t){this.pageCounter.addText(`Page: ${e}`),this.carsCounter.addText(`Total cars: ${t}`)}turnOffBtns(){this.btnNext.disable(),this.btnPrev.disable()}next(e){this.btnNext.addClick(e)}prev(e){this.btnPrev.addClick(e)}}},3287:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Winners=void 0;const a=n(2763),r=n(6087),i=n(8048),s=n(307),o=n(3295);t.Winners=class{view;model=new r.WinnersModel;pagination=new o.Pagination(10);constructor(e){this.view=new i.WinnersView(e),this.view.handleSortWins((()=>this.sort(s.WinnerSort.wins))),this.view.handleSortTime((()=>this.sort(s.WinnerSort.time))),this.pagination.render(this.view.table.el),this.pagination.next((()=>{this.changePage(s.PageDirection.NEXT)})),this.pagination.prev((()=>{this.changePage(s.PageDirection.PREV)}))}init=async()=>{try{await this.model.getWinners();const e=[];this.model.winnersOnPage.forEach((t=>{e.push(a.garageService.getCar(t.id).then((e=>e)))})),(await Promise.allSettled(e)).forEach(((e,t)=>{"rejected"!==e.status&&this.view.addRow(e.value,this.model.winnersOnPage[t])})),this.pagination.updatePagination(this.model.total,this.model.totalOnPage,this.model.page)}catch(e){console.log(e)}};sort=e=>{this.model.sort!==e?(this.model.order=s.OrderSort.ASC,this.model.sort=e):this.model.order=this.model.order===s.OrderSort.ASC?s.OrderSort.DESC:s.OrderSort.ASC,this.view.addArrow(e,this.model.order),this.updateTable()};changePage(e){switch(this.pagination.turnOffBtns(),e){case s.PageDirection.NEXT:this.model.page+=1;break;case s.PageDirection.PREV:if(1===this.model.page)return;this.model.page-=1}this.updateTable()}updateTable(){this.view.disableSorting(),this.model.winnersOnPage=[],this.model.totalOnPage=0,this.view.table.addClass("winners__table_hide"),this.view.table.el.addEventListener("transitionend",(()=>{this.view.removeAllCars(),this.init().catch((()=>{})),this.view.table.removeClass("winners__table_hide"),this.view.enableSorting()}),{once:!0})}hide=()=>{this.view.disableSorting(),this.view.removeAllCars(),this.model.winnersOnPage=[],this.model.totalOnPage=0,this.view.winnersContainer.removeClass("winners_active")};show=()=>{this.view.winnersContainer.addClass("winners_active"),this.view.enableSorting()}}},6087:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersModel=void 0;const a=n(307),r=n(630);t.WinnersModel=class{total=0;totalOnPage=0;winnersOnPage=[];page=1;order=a.OrderSort.ASC;sort=a.WinnerSort.time;async getWinners(){try{const{winners:e,totalCount:t}=await r.winnerService.getWinners(this.page,this.sort,this.order);this.total=t,e.forEach((e=>{this.winnersOnPage.find((t=>t.id===e.id))||this.totalOnPage>=10||(this.winnersOnPage.push(e),this.totalOnPage+=1)}))}catch(e){console.log(e)}}}},8048:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersView=void 0,n(7874);const r=a(n(7950)),i=n(307),s=a(n(9289));t.WinnersView=class{table=new r.default({tag:"div",classNames:"winners__table"});headerWinCounter=new r.default({tag:"div",text:"Wins",classNames:"row__item header__wins"});headerTime=new r.default({tag:"div",text:"Best time",classNames:"row__item header__time"});counter=1;rowsMap=new Map;winnersContainer=new r.default({tag:"div",classNames:"winners"});constructor(e){const t=new r.default({tag:"div",classNames:"table__row table__header"}),n=new r.default({tag:"div",text:"№",classNames:"row__item header__number"}),a=new r.default({tag:"div",text:"Car",classNames:"row__item header__car"}),i=new r.default({tag:"div",text:"Name",classNames:"row__item header__name"});t.addInner(n,a,i,this.headerWinCounter,this.headerTime),this.table.addInner(t),this.winnersContainer.addInner(this.table),e.append(this.winnersContainer.createElement())}render(e){e.append(this.table.createElement())}addRow(e,t){const n=new r.default({tag:"div",classNames:"table__row"}),a=new r.default({tag:"div",text:`${this.counter}`,classNames:"row__item item__number"}),i=new r.default({tag:"div",classNames:"row__item item_car"});i.el.innerHTML=(0,s.default)(e.color);const o=new r.default({tag:"div",text:e.name,classNames:"row__item item__name"}),d=new r.default({tag:"div",text:`${t.wins}`,classNames:"row__item item__wins"}),l=new r.default({tag:"div",text:`${t.time}`,classNames:"row__item item__time"});n.addInner(a,i,o,d,l),this.counter+=1,this.rowsMap.set(e.id,n),this.table.el.append(n.createElement())}removeCar(e){this.rowsMap.has(e)&&(this.rowsMap.get(e)?.destroy(),this.rowsMap.delete(e))}removeAllCars(){this.rowsMap.forEach((e=>e.destroy())),this.rowsMap.clear(),this.counter=1}handleSortWins(e){this.headerWinCounter.el.addEventListener("click",e)}handleSortTime(e){this.headerTime.el.addEventListener("click",e)}disableSorting(){this.headerWinCounter.addClass("header__wins_disabled"),this.headerTime.addClass("header__time_disabled")}enableSorting(){this.headerWinCounter.removeClass("header__wins_disabled"),this.headerTime.removeClass("header__time_disabled")}removeArrows(){this.headerTime.removeClass("arrow_asc"),this.headerTime.removeClass("arrow_desc"),this.headerWinCounter.removeClass("arrow_asc"),this.headerWinCounter.removeClass("arrow_desc")}addArrow(e,t){this.removeArrows(),e===i.WinnerSort.wins&&(t===i.OrderSort.ASC?this.headerWinCounter.addClass("arrow_asc"):this.headerWinCounter.addClass("arrow_desc")),e===i.WinnerSort.time&&(t===i.OrderSort.DESC?this.headerTime.addClass("arrow_asc"):this.headerTime.addClass("arrow_desc"))}}},4073:(e,t)=>{function n(e){return e[Math.floor(Math.random()*e.length)]}Object.defineProperty(t,"__esModule",{value:!0}),t.buildName=void 0,t.buildName=function(e,t){return`${n(e)} ${n(t)}`}},407:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomColor=void 0,t.getRandomColor=function(){return`#${Math.floor(256*Math.random()*256*256).toString(16)}`}},6761:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CAR_WIDTH=t.BASE_URL=void 0,t.BASE_URL="http://127.0.0.1:3000",t.CAR_WIDTH=76},9463:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isError=void 0,t.isError=function(e){return e instanceof Error}},307:(e,t)=>{var n,a,r,i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.PageDirection=t.OrderSort=t.WinnerSort=t.Endpoints=t.EngineStatus=void 0,function(e){e.Start="started",e.Stop="stopped",e.Drive="drive"}(n||(t.EngineStatus=n={})),function(e){e.Garage="/garage",e.Engine="/engine",e.Winners="/winners"}(a||(t.Endpoints=a={})),function(e){e.id="id",e.wins="wins",e.time="time"}(r||(t.WinnerSort=r={})),function(e){e.ASC="ASC",e.DESC="DESC"}(i||(t.OrderSort=i={})),function(e){e.NEXT="next",e.PREV="prev"}(s||(t.PageDirection=s={}))},8958:(e,t,n)=>{e.exports=n.p+"4d12478798d4877ca37e.svg"},4057:(e,t,n)=>{e.exports=n.p+"216e25e9e22f066231d6.svg"},5943:(e,t,n)=>{e.exports=n.p+"60a20264928332799546.svg"}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={id:a,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var r=a.length-1;r>-1&&!e;)e=a[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{n(7654);const e=new(n(6077).App);document.addEventListener("DOMContentLoaded",(()=>{e.init()}))})()})();